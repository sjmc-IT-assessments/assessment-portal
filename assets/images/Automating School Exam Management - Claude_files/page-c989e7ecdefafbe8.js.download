(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{66624:function(e,t,s){Promise.resolve().then(s.bind(s,85558))},85558:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var n=s(27573),r=s(61867),a=s(7653),o=s(42457);function i(e){let{parentWindow:t,allowedOrigins:s,onOutsideRequest:n}=e,[r,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(t){let e=new o.A({parentWindow:t,allowedOrigins:s,onOutsideRequest:n});return i(e),()=>{e.cleanup()}}},[t,s,n]);let l=(0,a.useCallback)(async(e,t)=>{if(r)return r.sendRequest(e,t);throw Error("Communicator not initialized")},[r]);return{sendRequest:null===r?void 0:l}}function l(e){switch(e.type){case"UnsupportedImports":return{title:"Artifact failed to load",description:"The generated artifact uses libraries we don't support:",inset:[...e.unsupportedModules,...e.nonExistentIcons.map(e=>"{ ".concat(e,' } from "lucide-react"'))],subtext:"The code itself may still work. To use it, you'll need a development setup with these libraries installed."};case"RuntimeError":return{title:"Error running artifact",description:"An error occurred while trying to run the generated artifact.",inset:[e.message],insetStyle:"danger"};case"FileNotFound":return{title:"File not found",description:'The file "'.concat(e.fileName,'" could not be found.'),subtext:"Please check the file name and try again."};case"ClaudeCompletionError":return{title:"Error in Claude completion",description:e.message}}}var c=s(15489),d=s(51395),u=s(67754),m=s(18308),p=s(4403),g=s(83187),h=s(56113),f=e=>{let{title:t,description:s,subtext:r,inset:a,cta:o,onClick:i,ctaDisabled:l,insetStyle:c="default"}=e,d=()=>a?Array.isArray(a)?(0,n.jsx)("ul",{children:a.map((e,t)=>(0,n.jsx)("li",{children:e},t))}):a:null;return(0,n.jsxs)(h.Card,{className:"border-gray-200 w-[460px] max-w-full shadow-lg bg-bg-000",children:[(0,n.jsxs)(h.CardHeader,{className:"flex-row items-center space-y-0",children:[(0,n.jsx)(p.Z,{className:"mr-2 h-5 w-5"}),(0,n.jsx)(h.CardTitle,{children:t})]}),(0,n.jsxs)(h.CardContent,{children:[(0,n.jsx)("p",{className:"mb-2 text-sm",children:s}),!!a&&(0,n.jsx)("div",{className:(0,m.Z)("flex flex-col rounded-md bg-gray-100 p-2 font-mono text-xs","danger"===c&&"text-destructive"),children:d()}),!!r&&(0,n.jsx)("p",{className:"text-text-500 mt-2 text-sm",children:r}),!!o&&(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(g.Button,{className:"mt-4",onClick:i,disabled:l,children:o})})]})]})},w=s(34176),y=s(80612),x=s(52547),b=s(81242),v=s(37120),E=s(15344);let R=e=>(0,E.vs)(e,{transforms:["jsx","typescript","imports"],production:!0}).code.substring(13),C="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js",j="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js";function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return new Promise(s=>{let n="\n      importScripts('".concat(C,"', '").concat(j,"');\n\n      const dependencies = {\n        _,\n        lodash: _,\n        papaparse: Papa,\n        // Add other dependencies here\n      };\n\n      const mockRequire = (moduleName) => {\n        return dependencies[moduleName];\n      };\n\n      let pendingPromises = new Set();\n      let pendingTimers = new Set();\n\n      const originalPromise = Promise;\n      self.Promise = function (...args) {\n        const promise = new originalPromise(...args);\n        pendingPromises.add(promise);\n        promise.then(() => pendingPromises.delete(promise), () => pendingPromises.delete(promise));\n        return promise;\n      };\n\n      // Maintain static methods of Promise\n      Object.getOwnPropertyNames(originalPromise).forEach(prop => {\n        if (prop !== 'prototype' && typeof originalPromise[prop] === 'function') {\n          self.Promise[prop] = function(...args) {\n            const result = originalPromise[prop].apply(originalPromise, args);\n            if (result instanceof originalPromise) {\n              pendingPromises.add(result);\n              result.then(() => pendingPromises.delete(result), () => pendingPromises.delete(result));\n            }\n            return result;\n          };\n        }\n      });\n\n      const originalSetTimeout = self.setTimeout;\n      self.setTimeout = function (callback, delay, ...args) {\n        const timer = originalSetTimeout(() => {\n          pendingTimers.delete(timer);\n          callback(...args);\n        }, delay);\n        pendingTimers.add(timer);\n        return timer;\n      };\n\n      function waitForAsync() {\n        return new originalPromise(resolve => {\n          function check() {\n            if (pendingPromises.size === 0 && pendingTimers.size === 0) {\n              resolve();\n            } else {\n              originalSetTimeout(check, 0);\n            }\n          }\n          check();\n        });\n      }\n\n      const stringifyArg = (arg) => {\n        if (typeof arg === 'object' && arg !== null) {\n          try {\n            return JSON.stringify(arg);\n          } catch (error) {\n            return '[Unstringifiable Value]';\n          }\n        }\n        return String(arg);\n      };\n\n      const logs = [];\n      const originalConsole = console;\n      console = {\n        log: (...args) => {\n          const stringifiedArgs = args.map(stringifyArg);\n          logs.push(stringifiedArgs.join(' '));\n        },\n        warn: (...args) => {\n          const stringifiedArgs = args.map(stringifyArg);\n          logs.push('WARN: ' + stringifiedArgs.join(' '));\n        },\n        error: (...args) => {\n          const stringifiedArgs = args.map(stringifyArg);\n          logs.push('ERROR: ' + stringifiedArgs.join(' '));\n        }\n      };\n\n\n      // In case of multiple files, use a map\n      let fileReadId = 0\n      const fileReadCallbacks = new Map();\n      self.window = {\n        fs: {\n          readFile: async (filename, encoding) => {\n            return new Promise((resolve, reject) => {\n              const id = fileReadId++;\n              fileReadCallbacks.set(id, { resolve, reject });\n              self.postMessage({ type: 'readFile', id, filename, encoding});\n            });\n          }\n        }\n      }\n\n      self.onmessage = async function(e) {\n        if (e.data.type === 'fileContent') {\n          const callback = fileReadCallbacks.get(e.data.id);\n          callback.resolve(e.data.content);\n          await waitForAsync();\n          fileReadCallbacks.delete(e.data.id);\n        } else if (e.data.type === 'fileError') {\n          const callback = fileReadCallbacks.get(e.data.id);\n          callback.reject(new Error(e.data.error));\n          fileReadCallbacks.delete(e.data.id);\n        }\n        const code = e.data;\n        const wrappedCode = `\n          return (async ({ require }) => {\n            ${code}\n          });\n        `;\n\n        try {\n          const fn = new Function(wrappedCode);\n          const result = await fn()({ require: mockRequire });\n          await waitForAsync();\n          self.postMessage({ status: 'success', result: JSON.stringify(result), logs });\n        } catch (error) {\n          self.postMessage({\n            status: 'error',\n            error: error instanceof Error ? error.message : String(error),\n            logs\n          });\n        }\n      };\n    "),a=new Worker(URL.createObjectURL(new Blob([n],{type:"application/javascript"}))),o=setTimeout(()=>{a.terminate(),s({status:"error",logs:[],error:"Execution timed out"})},t);a.onmessage=async e=>{var t,n,i,l;if((null===(t=e.data)||void 0===t?void 0:t.type)==="readFile")try{let t=await window.fs.readFile(null===(n=e.data)||void 0===n?void 0:n.filename,null===(i=e.data)||void 0===i?void 0:i.encoding);a.postMessage({type:"fileContent",content:t,id:null===(l=e.data)||void 0===l?void 0:l.id})}catch(e){s({status:"error",logs:[],error:e instanceof Error?e.message:String(e)}),a.terminate()}else{clearTimeout(o),a.terminate();let t=r.vr.safeParse(e.data);t.success?s(t.data):s({status:"error",logs:[],error:"Invalid execution result: "+t.error.message})}},a.postMessage(R(e))})}let q=e=>{let{sendRequest:t,handleError:s}=e;(0,a.useEffect)(()=>{let e=void 0===t?async(e,t)=>Promise.resolve(null):async(e,n)=>{try{let s=await t(r.to.GetFile,{"@type":"anthropic.claude.usercontent.sandbox.GetFileRequest",key:e});if("anthropic.claude.usercontent.sandbox.GetFileResponse"!==s["@type"]&&"type.googleapis.com/anthropic.claude.usercontent.sandbox.GetFileResponse"!==s["@type"])throw Error("Unexpected response type");let a=s.value;if(null===a)throw Error('File not found: No file named "'.concat(e,'"'));let o=(null==n?void 0:n.encoding)||null;if("utf8"===o||"utf-8"===o||"utf_8"===o)return new TextDecoder("utf-8").decode(a);if("binary"===o||null===o)return a;throw Error("Unsupported encoding: ".concat(o))}catch(t){throw t instanceof Error?t.message.startsWith("File not found:")?s({type:"FileNotFound",fileName:e}):s({type:"RuntimeError",message:t.message}):s({type:"RuntimeError",message:String(t)}),t}},n=(e,t)=>{throw Error("Synchronous file operations are not supported in this environment. Please use readFile instead.")},a=void 0===t?async e=>Promise.resolve(""):async e=>{try{var n;let s=await t(r.to.ClaudeCompletion,{"@type":"anthropic.claude.usercontent.sandbox.ClaudeCompletionRequest",prompt:e});if("anthropic.claude.usercontent.sandbox.ClaudeCompletionResponse"!==s["@type"])throw Error("Unexpected response type");return null!==(n=s.completion)&&void 0!==n?n:""}catch(e){return s({type:"ClaudeCompletionError",message:e instanceof Error?e.message:String(e)}),""}};window.fs={readFile:e,readFileSync:n},window.claude={complete:a}},[t,s])},S={allowedParents:[{origin:"claude.ai",scheme:"https"},{origin:"preview.claude.ai",scheme:"https"},{origin:"claude.site",scheme:"https"},{origin:"feedback.anthropic.com",scheme:"https"}],defaultParentOrigin:"claude.ai",origin:"https://www.claudeusercontent.com"},M={allowedParents:[{origin:"claude-ai.staging.ant.dev",scheme:"https"},{origin:"preview.claude-ai.staging.ant.dev",scheme:"https"},{origin:"staging.claude.site",scheme:"https"},{origin:"staging.claudeusercontent.com",scheme:"https"},{origin:"localhost:4000",scheme:"http"}],defaultParentOrigin:"claude-ai.staging.ant.dev",origin:"https://staging.claudeusercontent.com"},T={allowedParents:[{origin:"localhost:4000",scheme:"http"},{origin:"localhost:4020",scheme:"http"},{origin:"localhost:3000",scheme:"http"},{origin:"localhost:4010",scheme:"http"}],defaultParentOrigin:"localhost:4000",origin:"http://localhost:4010"},k=["development","production","staging"],N="production";if(N&&!k.includes(N))throw Error("Invalid NEXT_PUBLIC_APP_ENV value, must be one of ".concat(k.join(", ")));let I={production:S,staging:M,development:T}[N||"development"];function F(){return{...I}}let{defaultParentOrigin:L}=F();function A(){try{return window.self!==window.top}catch(e){return!0}}function D(){if(window.top)try{window.top.location.href="//".concat(L);return}catch(e){}window.location.href="//".concat(L)}function O(e){let{error:t}=e,s=l(t);return(0,n.jsx)("div",{className:"flex min-h-full w-full items-center justify-center bg-gray-100 p-4",children:(0,n.jsx)(f,{title:s.title,description:s.description,inset:s.inset,subtext:s.subtext,insetStyle:s.insetStyle})})}function _(){let{allowedParents:e}=F(),[t,s]=(0,a.useState)(""),[o,l]=(0,a.useState)(),[m,p]=(0,a.useState)(null),[g,h]=(0,a.useState)(!1),E=(0,a.useRef)(null),R=(0,a.useMemo)(()=>e.map(e=>"".concat(e.scheme,"://").concat(e.origin)),[e]),C=(0,a.useCallback)(()=>{E.current&&(clearTimeout(E.current),E.current=null),h(!1)},[]),j=(0,a.useCallback)(async e=>{let{method:t,payload:n}=e;if(C(),t===r.to.SetContent){p(null),s(n.content),l(n.type);return}if(t===r.to.RunCode)try{let e=await P(n.code);return{"@type":"anthropic.claude.usercontent.sandbox.RunCodeResponse",...e}}catch(e){return{"@type":"anthropic.claude.usercontent.sandbox.RunCodeResponse",status:"error",logs:[],error:"Unexpected error executing code: "+(e instanceof Error?e.message:String(e))}}},[C]),{sendRequest:S}=i({parentWindow:window.parent,allowedOrigins:R,onOutsideRequest:j}),M="parent"===(0,u.useSearchParams)().get("errorReportingMode")?"parent":"sandbox",T=(0,a.useCallback)(e=>{"parent"===M&&e?null==S||S(r.to.ReportError,{"@type":"anthropic.claude.usercontent.sandbox.ReportErrorRequest",error:e}):p(e)},[M,S]);q({sendRequest:S,handleError:T}),(0,a.useEffect)(()=>{A()||D()},[]),(0,a.useEffect)(()=>{null==S||S(r.to.ReadyForContent,{"@type":"google.protobuf.Empty"})},[S]),(0,a.useEffect)(()=>(C(),E.current=setTimeout(()=>{h(!0)},3e3),()=>{E.current&&clearTimeout(E.current)}),[t,o,C]);let k=(0,a.useCallback)(t=>{var n;if(!e.some(e=>t.origin==="".concat(e.scheme,"://").concat(e.origin))||!t.data.type)return;C();let{type:r,content:a}=t.data;l(r),s(a),null===(n=t.source)||void 0===n||n.postMessage({type:"MESSAGE_RECEIVED",requestId:t.data.requestId},{targetOrigin:t.origin})},[e,C]);return((0,a.useEffect)(()=>(window.addEventListener("message",k),window.parent&&e.forEach(e=>{window.parent.postMessage({type:"USER_CONTENT_RENDERER_READY"},"".concat(e.scheme,"://").concat(e.origin))}),()=>window.removeEventListener("message",k)),[k,e]),m&&"sandbox"===M)?(0,n.jsx)(O,{error:m}):(0,n.jsx)(d.ErrorBoundary,{errorComponent:e=>{let{error:t}=e;return T({type:"RuntimeError",message:t.message}),null},children:(0,n.jsx)(n.Fragment,{children:t&&o?(0,n.jsxs)(n.Fragment,{children:[o===c.JP.Html&&(0,n.jsx)(b.Z,{content:t}),o===c.JP.Svg&&(0,n.jsx)(v.Z,{content:t}),o===c.JP.Mermaid&&(0,n.jsx)(w.Z,{content:t}),o===c.JP.React&&(0,n.jsx)(y.Z,{content:t,handleError:T}),o===c.KD.Repl&&(0,n.jsx)(x.Z,{initialCode:t,sendRequest:S})]}):g?(0,n.jsx)("div",{className:"flex min-h-full w-full items-center justify-center bg-gray-100 p-4",children:(0,n.jsx)(f,{title:"Loading is taking longer than expected",description:"There may be an issue with the content you're trying to load. ",subtext:"The code itself may still be valid and functional. "})}):(0,n.jsx)("div",{className:"loader"})})},t)}!function(){A()||D()}()},98411:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var n=s(27573),r=s(7653),a=s(95831),o=s(77484),i=s(92713),l=s(55125),c=s(18590),d=s(83187);let u=()=>{let{zoomIn:e,zoomOut:t}=(0,a.M4)(),[s,u]=(0,r.useState)(!1),m=(0,r.useCallback)(()=>{let e=document,t=e.documentElement;e.fullscreenElement?e.exitFullscreen&&(e.exitFullscreen(),u(!1)):(t.requestFullscreen(),u(!0))},[]);return(0,n.jsx)("div",{className:"absolute bottom-2 right-2 z-10 flex flex-col",children:(0,n.jsxs)("div",{className:"flex flex-col gap-0.5 rounded-md border-[0.5px] border-[#636d83a0] p-0.5",children:[(0,n.jsx)(d.Button,{className:"flex !h-7 !w-7 items-center justify-center !border-0 !bg-transparent !px-0 !text-[#636D83] !shadow-none hover:!bg-[#3338421f]",variant:"outline",onClick:t=>{t.preventDefault(),e()},children:(0,n.jsx)(o.Z,{size:16})}),(0,n.jsx)("div",{className:"h-[0.5px] w-full px-1",children:(0,n.jsx)("hr",{className:"border-b-[0.5px] border-t-0 border-[#636D83a0]"})}),(0,n.jsx)(d.Button,{className:"flex !h-7 !w-7 items-center justify-center !border-0 !bg-transparent !px-0 !text-[#636D83] !shadow-none hover:!bg-[#3338421f]",variant:"outline",onClick:e=>{e.preventDefault(),t()},children:(0,n.jsx)(i.Z,{size:16})}),(0,n.jsx)("div",{className:"h-[0.5px] w-full px-1",children:(0,n.jsx)("hr",{className:"border-b-[0.5px] border-t-0 border-[#636D83a0]"})}),(0,n.jsx)(d.Button,{className:"flex !h-7 !w-7 items-center justify-center !border-0 !bg-transparent !px-0 !text-[#636D83] !shadow-none hover:!bg-[#3338421f]",variant:"outline",onClick:e=>{e.preventDefault(),m()},children:s?(0,n.jsx)(l.Z,{size:16}):(0,n.jsx)(c.Z,{size:16})})]})})};var m=e=>{let{children:t,style:s}=e,[o,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]),(0,n.jsx)("div",{className:"".concat(o?"fixed inset-0 z-50":"h-screen w-full"," [&>.react-transform-wrapper>.react-transform-component]:flex [&>.react-transform-wrapper>.react-transform-component]:h-full [&>.react-transform-wrapper>.react-transform-component]:w-full [&>.react-transform-wrapper>.react-transform-component]:cursor-move [&>.react-transform-wrapper>.react-transform-component]:items-center [&>.react-transform-wrapper>.react-transform-component]:justify-center [&>.react-transform-wrapper>.react-transform-component]:p-4 [&>.react-transform-wrapper]:h-full [&>.react-transform-wrapper]:w-full"),style:s,children:(0,n.jsxs)(a.d$,{doubleClick:{disabled:!1},children:[(0,n.jsx)(u,{}),(0,n.jsx)(a.Uv,{children:t})]})})}},34176:function(e,t,s){"use strict";var n=s(27573),r=s(7653),a=s(98411);let o={darkMode:!0,primaryColor:"#333842",secondaryColor:"#21252B",tertiaryColor:"#abb2bf",primaryTextColor:"#ABB2BF",secondaryTextColor:"#5c6370",tertiaryTextColor:"#4b5263",primaryBorderColor:"#636D83",secondaryBorderColor:"#5c6370",tertiaryBorderColor:"#4b5263",edgeLabelBackground:"#282C34",lineColor:"#636D83",textColor:"#abb2bf",pie1:"#56b6c2",pie2:"#61afef",pie3:"#c678dd",pie4:"#98c379",pie5:"#e06c75",pie6:"#d19a66",pieStrokeColor:"#2C313A",pieOuterStrokeColor:"#2C313A",fillType0:"#0d7377",fillType1:"#1f4e79",fillType2:"#8e44ad",fillType3:"#317732",fillType4:"#a31d48",fillType5:"#8f5c38",fillType6:"#a37d18",fillType7:"#4c5056"},i=()=>{let[e,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{let e=await Promise.all([s.e(4843),s.e(7859),s.e(8735)]).then(s.bind(s,95199));t(e.default)}catch(e){console.error("Failed to load Mermaid: ".concat(e))}})()},[]),e},l=e=>{let{content:t}=e,s=i();(0,r.useEffect)(()=>{null==s||s.initialize({securityLevel:"strict",theme:"base",themeCSS:".label foreignObject { overflow: visible; }",themeVariables:{fontFamily:"monospace",fontSize:"14px",...o}})},[s]),(0,r.useEffect)(()=>{s&&setTimeout(()=>{let e=document.getElementById("mermaid");null==e||e.removeAttribute("data-processed"),null==s||s.contentLoaded()},1)},[t,s]);let l=async()=>{if(document.fullscreenElement){var e,t;await (null===(e=(t=document).exitFullscreen)||void 0===e?void 0:e.call(t))}else await document.documentElement.requestFullscreen()};return s?(0,n.jsxs)(a.Z,{style:{backgroundColor:"rgb(40, 44, 52)"},children:[(0,n.jsx)("div",{id:"mermaid",className:"mermaid flex max-h-full max-w-full grow items-center justify-center self-stretch bg-[#282C34] [&>svg]:max-h-full [&>svg]:max-w-full",children:t}),(0,n.jsx)("button",{onClick:l,className:"absolute bottom-2 right-2 z-10 rounded-md bg-[#3338421f] px-2 py-1 text-[#636D83] hover:bg-[#3338423f]"})]}):(0,n.jsx)(n.Fragment,{children:"Loading..."})};t.Z=l},52547:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(27573),_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(61867),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7653);let ReplRenderer=param=>{let{initialCode="",sendRequest}=param,fetchData=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(async e=>{if(sendRequest)return(await sendRequest(_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__.to.GetFile,{key:e,"@type":"anthropic.claude.usercontent.sandbox.GetFileRequest"})).value},[sendRequest]),onFinish=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(e=>{null==sendRequest||sendRequest(_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__.to.SendConversationMessage,{messageType:"text",message:e,"@type":"anthropic.claude.usercontent.sandbox.SendConversationMessageRequest"})},[sendRequest]),onError=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(e=>{null==sendRequest||sendRequest(_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__.to.SendConversationMessage,{messageType:"error",message:e,"@type":"anthropic.claude.usercontent.sandbox.SendConversationMessageRequest"})},[sendRequest]);return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{try{var _JSON_stringify;let res=eval(initialCode);onFinish(null!==(_JSON_stringify=JSON.stringify(res))&&void 0!==_JSON_stringify?_JSON_stringify:"")}catch(err){onError(err instanceof Error?err.message:String(err))}},[initialCode,onError,onFinish]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{})};ReplRenderer.displayName="ReplRenderer",__webpack_exports__.Z=ReplRenderer},81242:function(e,t,s){"use strict";var n=s(27573),r=s(38441),a=s(75530),o=s(57780),i=s(7653),l=s(56215);let c=e=>{let{content:t}=e,[s,c]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e=e=>{e.data&&"console"===e.data.type&&c(t=>[...t,e.data.message])};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]);let d="\n    <script>\n      (function() {\n        const originalConsole = window.console;\n        window.console = {\n          log: (...args) => {\n            originalConsole.log(...args);\n            window.parent.postMessage({ type: 'console', message: args.join(' ') }, '*');\n          },\n          error: (...args) => {\n            originalConsole.error(...args);\n            window.parent.postMessage({ type: 'console', message: 'Error: ' + args.join(' ') }, '*');\n          },\n          warn: (...args) => {\n            originalConsole.warn(...args);\n            window.parent.postMessage({ type: 'console', message: 'Warning: ' + args.join(' ') }, '*');\n          }\n        };\n\n        window.addEventListener('error', (event) => {\n          window.parent.postMessage({ type: 'console', message: 'Uncaught Error: ' + event.message }, '*');\n        });\n      })();\n    </script>\n  ",u=t.replace("<head>","<head>".concat(d));return(0,n.jsxs)(l.ResizablePanelGroup,{direction:"vertical",className:"h-screen",children:[(0,n.jsx)(l.ResizablePanel,{defaultSize:s.length>0?80:100,children:(0,n.jsx)("iframe",{className:"h-full w-full",sandbox:"allow-scripts",srcDoc:u})}),s.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.ResizableHandle,{withHandle:!0}),(0,n.jsx)(l.ResizablePanel,{defaultSize:20,children:(0,n.jsxs)("div",{className:"h-full overflow-auto p-4",style:{backgroundColor:"hsl(60 1.8% 22%)",backgroundImage:"linear-gradient(hsl(60 3.3% 17.8%), hsl(45 4.9% 16.1%))"},children:[(0,n.jsxs)("div",{className:"mb-2 inline-flex items-center gap-2 rounded-lg border px-2 py-1",style:{borderColor:"hsl(50 5.9% 40%)",color:"hsl(47 8.4% 79%)"},children:[(0,n.jsx)(r.Z,{size:12}),(0,n.jsx)("h2",{className:"gap-2 font-sans text-xs",children:"Console Messages"})]}),s.map((e,t)=>{let s=null,r={},i={color:"hsl(50 23.1% 94.9%)"};return e.startsWith("Error:")||e.startsWith("Uncaught Error:")?(s=(0,n.jsx)(a.Z,{size:12,className:"mt-1 shrink-0 text-red-500"}),r={backgroundColor:"rgba(255, 0, 0, 0.1)"},i.color="hsl(5 69.4% 72.9%)"):e.startsWith("Warning:")&&(s=(0,n.jsx)(o.Z,{size:12,className:"mt-1 shrink-0 text-yellow-500"}),r={backgroundColor:"rgba(255, 255, 0, 0.1)"},i.color="hsl(18 50.4% 47.5%)"),(0,n.jsxs)("div",{className:"mb-0.5 flex items-start gap-2 rounded-lg px-2 py-1",style:r,children:[(0,n.jsx)(n.Fragment,{children:s}),(0,n.jsx)("pre",{className:"flex-grow text-wrap font-mono text-sm",style:i,children:e})]},t)})]})})]})]})};t.Z=i.memo(c)},37120:function(e,t,s){"use strict";s.d(t,{Z:function(){return g}});var n=s(27573),r=s(7653),a=s(51757),o=s.n(a),i=s(87866);let l=e=>{let t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(!t)return console.error("Invalid color format:",e),e;let[,s,n,r,a="1"]=t,i=parseInt(s,10),l=parseInt(n,10),c=parseInt(r,10),d=parseFloat(a),[u,m,p]=o().rgb.hsl(i,l,c),g=Math.max(0,m-5),h=Math.max(0,p-25),[f,w,y]=o().hsl.rgb([u,g,h]);return"rgba(".concat(f,", ").concat(w,", ").concat(y,", ").concat(.8*d,")")},c=e=>{let t=new XMLSerializer().serializeToString(e),s=window.btoa(t);return"data:image/svg+xml;base64,".concat(s)},d=e=>{let t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},u=async(e,t)=>{let s=c(e);return new Promise((e,n)=>{let r=new Image;r.onload=async()=>{let s=d(r);try{let n=await t.getColorAsync(s),r=l(n.rgba),a=n.isDark?"#fff":"#000";e({backgroundColor:r,textColor:a})}catch(e){n(e)}},r.onerror=n,r.src=s})};var m=e=>{let[t,s]=(0,r.useState)(""),[n,a]=(0,r.useState)("");return(0,r.useEffect)(()=>{let t=new i.Z,n=e.current;if(!n)return;let r=n.querySelector("svg");r&&u(r,t).then(e=>{let{backgroundColor:t,textColor:n}=e;s(t),a(n)}).catch(e=>{console.error("Error getting average color:",e)})},[e]),{backgroundColor:t,textColor:n}},p=s(98411),g=e=>{let{content:t}=e,s=(0,r.useRef)(null),{backgroundColor:a,textColor:o}=m(s);return(0,n.jsx)(p.Z,{style:{backgroundColor:a,color:o},children:(0,n.jsx)("div",{ref:s,className:"h-full w-full [&>svg]:h-full [&>svg]:w-full",dangerouslySetInnerHTML:{__html:t}})})}},67754:function(e,t,s){"use strict";var n=s(534);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},42457:function(e,t,s){"use strict";s.d(t,{A:function(){return o},i:function(){return a}});var n=s(61867),r=s(3286);class a{setupMessageListener(){window.addEventListener("message",this.boundHandleMessage,!1)}handleMessage(e){if(e.origin!==this.allowedOrigin||e.source!==this.iframe.contentWindow)return;let t=Date.now();if(t-this.lastResetTime>this.RESET_INTERVAL&&(this.messageCount=0,this.lastResetTime=t),this.messageCount++,this.messageCount>this.MAX_MESSAGES_PER_INTERVAL){window.removeEventListener("message",this.boundHandleMessage),this.onRateLimited&&this.onRateLimited();return}let s=r.qV.safeParse(e.data);if(!s.success){console.warn("Received message does not conform to basic message shape, ignoring");return}let n=s.data;if("response"===n.channel){this.handleResponse(n);return}this.messageQueue.push(n),this.isConsumerRunning||this.consumeMessages()}handleResponse(e){let t=this.inFlightRequests.get(e.requestId);if(void 0!==t){t(e);return}}async consumeMessages(){for(this.isConsumerRunning=!0;this.messageQueue.length>0;){let e=this.messageQueue.shift();if(!e)continue;let t=n.P2.safeParse(e.method);if(!t.success){this.sendErrorResponse(e.requestId,400,"Unknown method");continue}let s=t.data,a=n.q2.safeParse(e);if(!a.success){this.sendErrorResponse(e.requestId,400,"Invalid payload content");continue}let o=a.data;if(this.requestLog.has(o.requestId)){this.sendErrorResponse(o.requestId,400,"Request ID already processed");continue}this.requestLog.set(o.requestId,{message:o,requestTimestamp:new Date().getTime()}),await this.onPermissionRequested(s).then(e=>"denied"!==e||(this.sendErrorResponse(o.requestId,403,"Permission denied"),!1)).catch(e=>(console.error("Error checking permission for method ".concat(s,":"),e),this.sendErrorResponse(o.requestId,500,"Error checking permission"),!1))&&(this.onCapabilityAction(o,this.boundSendRequest).then(e=>{var t;let s=r.Tk.parse({channel:"response",status:200,requestId:o.requestId,payload:null!=e?e:r.D7}),n=this.requestLog.get(o.requestId);n&&this.requestLog.set(o.requestId,{...n,response:s,responseTimestamp:new Date().getTime()}),null===(t=this.iframe.contentWindow)||void 0===t||t.postMessage(s,this.allowedOrigin)}).catch(e=>{console.error("Error processing action for method ".concat(s,":"),e),this.sendErrorResponse(o.requestId,500,"Internal server error while processing action")}),await new Promise(e=>requestAnimationFrame(e)))}this.isConsumerRunning=!1}sendErrorResponse(e,t,s){var n;let a=r.Kj.parse({channel:"response",status:t,requestId:e,payload:(0,r.v8)(s)}),o=this.requestLog.get(e);o&&this.requestLog.set(e,{...o,response:a,responseTimestamp:new Date().getTime()}),null===(n=this.iframe.contentWindow)||void 0===n||n.postMessage(a,this.allowedOrigin)}restartListening(){window.removeEventListener("message",this.boundHandleMessage),this.messageCount=0,this.lastResetTime=Date.now(),this.setupMessageListener()}cleanup(){window.removeEventListener("message",this.boundHandleMessage),this.messageQueue=[],this.isConsumerRunning=!1,this.inFlightRequests.clear()}async sendRequest(e,t){return new Promise((s,a)=>{var o;let i=Date.now().toString(),l={channel:"request",method:e,requestId:i,payload:t},c=e=>{let t=r.Tk.safeParse(e);if(!t.success){a(Error("Invalid response format"));return}let o=t.data;if(o.status>=400){let e=r.Kj.safeParse(o);e.success?a(Error(e.data.payload.error)):a(Error("Error response (".concat(o.status,")")));return}let i=n.O3.safeParse(o);i.success?s(i.data.payload):a(Error("Invalid response payload for the method"))};this.inFlightRequests.set(i,c),null===(o=this.iframe.contentWindow)||void 0===o||o.postMessage(l,this.allowedOrigin)})}getRequestLog(){return Array.from(this.requestLog.entries()).map(e=>{let[t,s]=e;return{...s,requestId:t}}).sort((e,t)=>t.requestTimestamp-e.requestTimestamp)}constructor({iframe:e,allowedOrigin:t,onRateLimited:s=null,onPermissionRequested:n,onCapabilityAction:r}){this.messageCount=0,this.lastResetTime=Date.now(),this.MAX_MESSAGES_PER_INTERVAL=30,this.RESET_INTERVAL=5e3,this.onRateLimited=null,this.messageQueue=[],this.isConsumerRunning=!1,this.requestLog=new Map,this.inFlightRequests=new Map,this.iframe=e,this.allowedOrigin=t,this.onRateLimited=s,this.onPermissionRequested=n,this.onCapabilityAction=r,this.boundHandleMessage=this.handleMessage.bind(this),this.boundSendRequest=this.sendRequest.bind(this),this.setupMessageListener()}}class o{setupMessageListener(){window.addEventListener("message",this.boundHandleMessage,!1)}handleMessage(e){if(!1===this.allowedOrigins.includes(e.origin)||e.source!==this.parentWindow)return;let t=r.qV.safeParse(e.data);if(!t.success){console.warn("Received message does not conform to basic request shape, ignoring");return}let s=t.data;if("response"===s.channel){this.handleResponse(s);return}if(!n.Wy.safeParse(s.method).success){this.sendErrorResponse(s.requestId,400,"Unknown method");return}let a=n.N7.safeParse(s);if(!a.success){this.sendErrorResponse(s.requestId,400,"Invalid payload content");return}let o=a.data;this.onOutsideRequest(o).then(e=>{let t=r.Tk.parse({channel:"response",status:200,requestId:o.requestId,payload:null!=e?e:r.D7});this.sendMessage(t)}).catch(e=>{console.error("Error processing action for method ".concat(o.method,":"),e),this.sendErrorResponse(o.requestId,500,"Internal error while processing action")})}sendErrorResponse(e,t,s){let n=r.Kj.parse({channel:"response",status:t,requestId:e,payload:(0,r.v8)(s)});this.sendMessage(n)}sendMessage(e){this.allowedOrigins.forEach(t=>{this.parentWindow.postMessage(e,t)})}cleanup(){window.removeEventListener("message",this.boundHandleMessage),this.inFlightRequests.clear()}handleResponse(e){let t=this.inFlightRequests.get(e.requestId);if(void 0!==t){t(e);return}}async sendRequest(e,t){return new Promise((s,a)=>{let o=Date.now().toString()+Math.random().toString(),i={channel:"request",method:e,requestId:o,payload:t},l=e=>{let t=r.Tk.safeParse(e);if(!t.success){a(Error("Invalid response format"));return}let o=t.data;if(o.status>=400){let e=r.Kj.safeParse(o);e.success?a(Error(e.data.payload.error)):a(Error("Error response (".concat(o.status,")")));return}let i=n.FO.safeParse(o);i.success?s(i.data.payload):a(Error("Invalid response payload for the method"))};this.inFlightRequests.set(o,l),this.sendMessage(i)})}constructor({parentWindow:e,allowedOrigins:t,onOutsideRequest:s}){this.inFlightRequests=new Map,this.parentWindow=e,this.allowedOrigins=t,this.onOutsideRequest=s,this.boundHandleMessage=this.handleMessage.bind(this),this.setupMessageListener()}}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[2717,6105,5458,1065,4310,8437,7712,7859,4517,1204,2551,9950,1867,612,1293,286,1744],function(){return t(66624)}),_N_E=e.O()}]);